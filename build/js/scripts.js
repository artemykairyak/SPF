"use strict";$(function(){function e(e){e.addClass("btn_disabled")}function o(e){e.removeClass("btn_disabled")}function a(a,i){if(l(a)){var d=a.serializeArray();e($(".order-modal__order-btn")),$.ajax({url:"https://cors-anywhere.herokuapp.com/http://spf.asap-lp.ru/mail/index.php",type:"POST",data:d,success:function(){i?(s($(".order-modal")),n(i,$(".success-modal"))):(r($(".order-modal")),t($(".success-modal"))),o($(".order-modal__order-btn"))},error:function(e){console.log(e)},dataType:"json"});var m=a.find(".order-modal__input-container");m.each(function(e,o){$(o).removeClass("order-modal__input-container_focused")}),a[0].reset()}}function t(e){e.addClass("modal_active"),$(".overlay").show()}function r(e){e.removeClass("modal_active"),$(".overlay").hide()}function n(e,o){$(".framed").length>0&&($(".framed").attr("style",""),$(".framed").removeClass("framed")),o.addClass("modal_framed"),o.css({width:e.outerWidth()+"px",height:e.outerHeight()+"px",left:e.offset().left+"px",top:e.offset().top+"px",transform:"none",position:"absolute",background:"rgba(45, 44, 44, 0.44)","max-width":"100%"}),e.css({opacity:0}),e.addClass("framed"),o.addClass("modal_active")}function s(){$(".modal").attr("style",""),$(".header__content-picture, .future__content-picture").attr("style",""),$(".modal").removeClass("modal_active"),$(".modal").removeClass("modal_framed")}function l(e){var o=!0;if(e.find(".order-modal__input-container_error").length)o=!1;else{var a=e.find(".order-modal__input");a.each(function(e,a){$(a).val()||($(a).parent().addClass("order-modal__input-container_error"),o=!1)})}return o}function i(){$(".mobile-menu").removeClass("mobile-menu_active"),$(".header__burger").removeClass("header__burger_active"),$(".overlay").hide()}setTimeout(function(){$(".teachers__slider").slick({infinite:!1,lazyLoad:"ondemand",slidesToShow:4,slidesToScroll:1,arrows:!0,prevArrow:$(".teachers__nav_left"),nextArrow:$(".teachers__nav_right"),fade:!1,responsive:[{breakpoint:1025,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2.5}},{breakpoint:500,settings:{slidesToShow:1.5}},{breakpoint:375,settings:{slidesToShow:1.3}}]})},100),$(".teachers__slide").on("mouseenter",function(){$(this).addClass("teachers__slide_hovered")}),$(".teachers__slide").on("mouseleave",function(){$(this).removeClass("teachers__slide_hovered")}),$(".order-modal__input").on("focus",function(){$(this).parent().addClass("order-modal__input-container_focused")}),$(".order-modal__input").on("blur",function(){$(this).val()||($(this).parent().removeClass("order-modal__input-container_focused"),$(this).parent().addClass("order-modal__input-container_error")),$(this).hasClass("order-modal__phone")&&!$(this).val().match(/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){6,14}(\s*)?$/)?$(this).parent().addClass("order-modal__input-container_error"):$(this).hasClass("order-modal__age")&&!$(this).val().match(/^\d{1,}$/)||$(this).hasClass("order-modal__name")&&!$(this).val()?$(this).parent().addClass("order-modal__input-container_error"):$(this).parent().removeClass("order-modal__input-container_error")}),$(".header__burger").on("click",function(e){e.preventDefault(),$(this).hasClass("header__burger_active")?($(".mobile-menu").removeClass("mobile-menu_active"),$(this).removeClass("header__burger_active"),$(".overlay").hide()):($(this).addClass("header__burger_active"),$(".mobile-menu").addClass("mobile-menu_active"),$(".overlay").show())}),$(".order-modal__form").on("submit",function(e){e.preventDefault(),console.log($(this)),$(this).closest(".modal").attr("style")&&$(this).closest(".modal").attr("style").length>0?a($(this),$(".framed")):a($(this))}),$(".modal__arr, .modal__close").on("click",function(){$(".framed").length>0&&($(".framed").attr("style",""),$(".framed").removeClass("framed"),$(".modal").removeClass("modal_framed")),$(".overlay").hide(),$(".modal").removeClass("modal_active")}),$(".header__menu-link_programming").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".programming").offset().top},700)}),$(".header__menu-link_design").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".design").offset().top},700)}),$(".header__menu-link_teachers").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".teachers").offset().top},700)}),$(".header__menu-link_contacts").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".contacts").offset().top},700)}),$(".mobile-menu__link_programming").on("click",function(e){e.preventDefault(),i(),$("html, body").animate({scrollTop:$(".programming").offset().top},700)}),$(".mobile-menu__link_design").on("click",function(e){e.preventDefault(),i(),$("html, body").animate({scrollTop:$(".design").offset().top},700)}),$(".mobile-menu__link_teachers").on("click",function(e){e.preventDefault(),i(),$("html, body").animate({scrollTop:$(".teachers").offset().top},700)}),$(".mobile-menu__link_contacts").on("click",function(e){e.preventDefault(),i(),$("html, body").animate({scrollTop:$(".contacts").offset().top},700)}),$(".contacts__totopbtn-button").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".header").offset().top},700)}),$(".header__content-picture, .future__content-picture").on("click",function(){$(window).width()>1024?($(".framed").length>0&&($(".framed").attr("style",""),$(".framed").removeClass("framed"),s()),n($(this),$(".order-modal"))):t($(".order-modal"))}),$(".programming__order-btn, .design__order-btn").on("click",function(e){e.preventDefault(),s(),t($(".order-modal"))}),$(".overlay").on("click",function(){$(".modal").removeClass("modal_active"),$(".overlay").hide(),$(".modal").removeClass("modal_framed"),$(".mobile-menu").removeClass("mobile-menu_active"),$(".header__burger").removeClass("header__burger_active")}),$(".success-modal__btn").on("click",function(e){e.preventDefault(),$(".modal").removeClass("modal_framed"),$(".framed").length>0&&($(".framed").attr("style",""),$(".framed").removeClass("framed")),$(".modal").removeClass("modal_active"),$(".overlay").hide()}),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[51.53147662,46.04544572],zoom:18,controls:[]},{searchControlProvider:"yandex#search"}),o=new ymaps.Placemark([51.53148888584206,46.04545542824164],{},{iconColor:"#d32f2f"});e.geoObjects.add(o),e.container.fitToViewport()})});
"use strict";$(function(){function e(e){e.addClass("btn_disabled")}function a(e){e.removeClass("btn_disabled")}function o(o,l){if(d(o)){var i=o.serializeArray();e($(".order-modal__order-btn")),$.ajax({url:"https://cors-anywhere.herokuapp.com/http://spf.asap-lp.ru/mail/index.php",type:"POST",data:i,success:function(){l?(s($(".order-modal")),n(l,$(".success-modal"))):(t($(".order-modal")),r($(".success-modal"))),a($(".order-modal__order-btn"))},error:function(e){console.log(e)},dataType:"json"});var m=o.find(".order-modal__input-container");m.each(function(e,a){$(a).removeClass("order-modal__input-container_focused")}),o[0].reset()}}function r(e){e.addClass("modal_active"),$(".overlay").show()}function t(e){e.removeClass("modal_active"),$(".overlay").hide()}function n(e,a){$(".framed").length>0&&($(".framed").attr("style",""),$(".framed").removeClass("framed")),a.addClass("modal_framed"),a.css({width:e.outerWidth()+"px",height:e.outerHeight()+"px",left:e.offset().left+"px",top:e.offset().top+"px",transform:"none",position:"absolute",background:"rgba(45, 44, 44, 0.44)","max-width":"100%"}),e.css({opacity:0}),e.addClass("framed"),a.addClass("modal_active")}function s(){$(".modal").attr("style",""),$(".header__content-picture, .future__content-picture").attr("style",""),$(".modal").removeClass("modal_active"),$(".modal").removeClass("modal_framed")}function d(e){var a=!0;if(e.find(".order-modal__input-container_error").length)a=!1;else{var o=e.find(".order-modal__input");o.each(function(e,o){$(o).val()||($(o).parent().addClass("order-modal__input-container_error"),a=!1)})}return a}setTimeout(function(){$(".teachers__slider").slick({infinite:!0,lazyLoad:"ondemand",slidesToShow:4,slidesToScroll:1,arrows:!0,prevArrow:$(".teachers__nav_left"),nextArrow:$(".teachers__nav_right"),fade:!1,responsive:[{breakpoint:1025,settings:{slidesToShow:3}}]})},100),$(".teachers__slide").on("mouseenter",function(){$(this).addClass("teachers__slide_hovered")}),$(".teachers__slide").on("mouseleave",function(){$(this).removeClass("teachers__slide_hovered")}),$(".order-modal__input").on("focus",function(){$(this).parent().addClass("order-modal__input-container_focused")}),$(".order-modal__input").on("blur",function(){$(this).val()||($(this).parent().removeClass("order-modal__input-container_focused"),$(this).parent().addClass("order-modal__input-container_error")),$(this).hasClass("order-modal__phone")&&!$(this).val().match(/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){6,14}(\s*)?$/)?$(this).parent().addClass("order-modal__input-container_error"):$(this).hasClass("order-modal__age")&&!$(this).val().match(/^\d{1,}$/)||$(this).hasClass("order-modal__name")&&!$(this).val()?$(this).parent().addClass("order-modal__input-container_error"):$(this).parent().removeClass("order-modal__input-container_error")}),$(".order-modal__form").on("submit",function(e){e.preventDefault(),$(this).closest(".modal").attr("style").length>0?o($(this),$(".framed")):o($(this))}),$(".modal__arr, .modal__close").on("click",function(){$(".framed").length>0&&($(".framed").attr("style",""),$(".framed").removeClass("framed"),$(".modal").removeClass("modal_framed")),$(".overlay").hide(),$(".modal").removeClass("modal_active")}),$(".header__menu-link_programming").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".programming").offset().top},700)}),$(".header__menu-link_design").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".design").offset().top},700)}),$(".header__menu-link_teachers").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".teachers").offset().top},700)}),$(".header__menu-link_contacts").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".contacts").offset().top},700)}),$(".header__content-picture, .future__content-picture").on("click",function(){$(".framed").length>0&&($(".framed").attr("style",""),$(".framed").removeClass("framed"),s()),n($(this),$(".order-modal"))}),$(".programming__order-btn, .design__order-btn").on("click",function(e){e.preventDefault(),s(),r($(".order-modal"))}),$(".overlay").on("click",function(){$(".modal").removeClass("modal_active"),$(".overlay").hide(),$(".modal").removeClass("modal_framed")}),$(".success-modal__btn").on("click",function(e){e.preventDefault(),$(".modal").removeClass("modal_framed"),$(".framed").length>0&&($(".framed").attr("style",""),$(".framed").removeClass("framed")),$(".modal").removeClass("modal_active"),$(".overlay").hide()}),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[51.53147662,46.04544572],zoom:18,controls:[]},{searchControlProvider:"yandex#search"}),a=new ymaps.Placemark([51.53148888584206,46.04545542824164],{},{iconColor:"#d32f2f"});e.geoObjects.add(a),e.container.fitToViewport()})});